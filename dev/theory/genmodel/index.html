<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>The generative model of the HGF: Volatility vs. value coupling · HierarchicalGaussianFiltering.jl</title><meta name="title" content="The generative model of the HGF: Volatility vs. value coupling · HierarchicalGaussianFiltering.jl"/><meta property="og:title" content="The generative model of the HGF: Volatility vs. value coupling · HierarchicalGaussianFiltering.jl"/><meta property="twitter:title" content="The generative model of the HGF: Volatility vs. value coupling · HierarchicalGaussianFiltering.jl"/><meta name="description" content="Documentation for HierarchicalGaussianFiltering.jl."/><meta property="og:description" content="Documentation for HierarchicalGaussianFiltering.jl."/><meta property="twitter:description" content="Documentation for HierarchicalGaussianFiltering.jl."/><meta property="og:url" content="https://ComputationalPsychiatry.github.io/HierarchicalGaussianFiltering.jl/theory/genmodel/"/><meta property="twitter:url" content="https://ComputationalPsychiatry.github.io/HierarchicalGaussianFiltering.jl/theory/genmodel/"/><link rel="canonical" href="https://ComputationalPsychiatry.github.io/HierarchicalGaussianFiltering.jl/theory/genmodel/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">HierarchicalGaussianFiltering.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction to Hierarchical Gaussian Filtering</a></li><li><span class="tocitem">Using the package</span><ul><li><a class="tocitem" href="../../generated/the_HGF_nodes/">The HGF Nodes</a></li><li><a class="tocitem" href="../../generated/building_an_HGF/">Building an HGF</a></li><li><a class="tocitem" href="../../generated/updating_the_HGF/">Updating the HGF</a></li><li><a class="tocitem" href="../../generated/premade_models/">List Of Premade Agent Models</a></li><li><a class="tocitem" href="../../generated/premade_HGF/">List Of Premade HGF&#39;s</a></li><li><a class="tocitem" href="../../generated/fitting_hgf_models/">Fitting an HGF-agent model to data</a></li><li><a class="tocitem" href="../../generated/utility_functions/">Utility Functions</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../generated/classic_binary/">classic binary</a></li><li><a class="tocitem" href="../../generated/classic_usdchf/">classic continouous</a></li><li><a class="tocitem" href="../../generated/classic_JGET/">classic JGET</a></li></ul></li><li><a class="tocitem" href="../../generated/all_functions/">All Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>The generative model of the HGF: Volatility vs. value coupling</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>The generative model of the HGF: Volatility vs. value coupling</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ComputationalPsychiatry/HierarchicalGaussianFiltering.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ComputationalPsychiatry/HierarchicalGaussianFiltering.jl/blob/main/docs/src/theory/genmodel.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="The-generative-model-of-the-HGF:-Volatility-vs.-value-coupling"><a class="docs-heading-anchor" href="#The-generative-model-of-the-HGF:-Volatility-vs.-value-coupling">The generative model of the HGF: Volatility vs. value coupling</a><a id="The-generative-model-of-the-HGF:-Volatility-vs.-value-coupling-1"></a><a class="docs-heading-anchor-permalink" href="#The-generative-model-of-the-HGF:-Volatility-vs.-value-coupling" title="Permalink"></a></h1><p>In the generative model of the HGF, (hidden) states of the world perform Gaussian random walks in time and can produce outcomes which are perceived by an observer as inputs. States can influence each other via volatility coupling or via value coupling.</p><p>In the classical 3-level binary HGF as presented in Mathys (2011), the two states of interest, <span>$x_2$</span> and <span>$x_3$</span>, are coupled to each other via volatility coupling, which means that for state <span>$x_2$</span>, the mean of the Gaussian random walk on trial <span>$k$</span> is given by its previous value <span>$x_2^{(k-1)}$</span>, while the step size (or variance) depends on the current value of the higher level state, <span>$x_3^{(k)}$</span>:</p><p class="math-container">\[    x_2^{(k)} \sim \mathcal{N}(x_2^{(k)} | x_2^{(k-1)}, \, f(x_3^{(k)})),\]</p><p>where the exact dependency is of the form</p><p class="math-container">\[    f(x_3^{(k)}) = \exp(\kappa_2 x_3^{(k)} + \omega_2).\]</p><p>However, a higher-level state can also have influence on a lower-level state by influencing its mean. In that case, the mean of the Gaussian random walk at one level is a function not only of its own previous value, but also the current value of the higher-level state (with step size either constant or a function of another state):</p><p class="math-container">\[    x_2^{(k)} \sim \mathcal{N}(x_2^{(k)} | x_2^{(k-1)} + \alpha_{4,2} x_4^{(k)}, \, \exp(\omega_2)),\]</p><p>which means constant step size, or</p><p class="math-container">\[    x_2^{(k)} \sim \mathcal{N}(x_2^{(k)} | x_2^{(k-1)} + \alpha_{4,2} x_4^{(k)}, \, \exp(\kappa_2 x_3^{(k)} + \omega_2)).\]</p><p>In other words, any given state in the world can be modelled as having a volatility parent state, a value parent state, or both, or none (in which case it evolves as a Gaussian random walk around its previous value with fixed step size). Consequently, when inferring on the evolution of these states, the exact belief update equations (which include the computation of new predictions, posterior values, and prediction errors, and represent an approximate inversion of this generative model, see Mathys (2011) depend on the nature of the coupling of a given state with its parent and children states. In particular, the nodes that implement the belief updates will communicate with their value parents via value prediction errors, or <strong>VAPE</strong>s, and via volatility prediction errors, or <strong>VOPE</strong>s, with their volatility parents.</p><p><img src="../../images/genmod.svg" alt="Figure1"/> <em>An example of a generative model of sensory inputs with six hidden states. Volatility coupling is depicted with dashed lines, value coupling with straight lines.</em></p><p>In <a href="#Figure1">Figure 1</a> we have drawn an example setup with six different environmental states and one outcome. Here, we have denoted states that function as value parents for other states as <span>$x_i$</span>, and states that function as volatility parents as <span>$\check{x}_i$</span>. Volatility coupling is depicted by curvy arrows, value coupling by straight arrows, and observable outcomes are linked to their hidden states via double arrows.</p><p>For the example illustrated in <a href="#Figure1">Figure 1</a> the following equations describe the generative model:</p><p class="math-container">\[\begin{align}
u^{(k)} &amp;\sim \mathcal{N}(u^{(k)} | x_1^{(k)}, \, \sigma_u) \\
x_1^{(k)}           &amp;\sim \mathcal{N}(x_1^{(k)} | x_1^{(k-1)} + \alpha_{2,1} x_2^{(k)}, \, \exp(\kappa_1 \check{x}_1^{(k)} + \omega_1)) \\
\check{x}_1^{(k)}   &amp;\sim \mathcal{N}(\check{x}_1^{(k)} | \check{x}_1^{(k-1)} + \alpha_{3,\check{1}} x_3^{(k)}, \, \exp(\omega_{\check{1}})) \\
x_2^{(k)}           &amp;\sim \mathcal{N}(x_2^{(k)} | x_2^{(k-1)}, \, \exp(\kappa_2 \check{x}_2^{(k)} + \omega_2)) \\
\check{x}_2^{(k)}   &amp;\sim \mathcal{N}(\check{x}_2^{(k)} | \check{x}_2^{(k-1)}, \, \exp(\omega_{\check{2}})) \\
x_3^{(k)}           &amp;\sim \mathcal{N}(x_3^{(k)} | x_3^{(k-1)}, \, \exp(\kappa_3 \check{x}_3^{(k)} + \omega_3)) \\
\check{x}_3^{(k)}   &amp;\sim \mathcal{N}(\check{x}_3^{(k)} | \check{x}_3^{(k-1)}, \, \exp(\omega_{\check{3}})) \\
\end{align}\]</p><p>Note that in this example, all states that are value parents of other states (or outcomes) have their own volatility parent, while states that are volatility parents to other nodes either have a value parent (as state <span>$\check{x}_1$</span>), or no parents (as states <span>$\check{x}_2$</span> and <span>$\check{x}_3$</span>). This is deliberately so, and we will see these two motifs - every state of a hierarchy has its own volatility estimation, and volatility states only have value parents - reappear in the following chapters.</p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.9.0 on <span class="colophon-date" title="Thursday 27 March 2025 20:22">Thursday 27 March 2025</span>. Using Julia version 1.11.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
